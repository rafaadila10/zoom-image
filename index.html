<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pinch Zoom Question Wizard</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
    }

    .col-sm-7, .col-sm-5 {
      float: left;
      padding: 10px;
      box-sizing: border-box;
    }

    .col-sm-7 {
      width: 70%;
    }

    .col-sm-5 {
      width: 30%;
    }

    .box {
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 10px;
      margin-bottom: 20px;
    }

    .box-header {
      background: #f9f9f9;
      padding: 10px;
      font-weight: bold;
    }

    .box-body {
      padding: 10px;
    }

    #questionWizard {
      transform: scale(1);
      transform-origin: center center;
      transition: transform 0.1s ease;
      touch-action: none; /* penting agar gesture bisa diterapkan */
      background: #fff;
    }

    .question-body img {
      max-width: 100%;
      height: auto;
    }

    .question-answer table {
      width: 100%;
    }

    .question-answer-button {
      margin-top: 20px;
    }

    .btn {
      padding: 8px 12px;
      border: none;
      border-radius: 4px;
      background-color: #3498db;
      color: white;
      cursor: pointer;
      margin-right: 5px;
    }

    .btn:disabled {
      background-color: #ccc;
    }
  </style>
</head>
<body>

<div class="col-sm-7 fu-example section">
  <div class="box outheBoxShadow wizard" id="questionWizard">
    <div class="box-header bg-white">
      <div class="checkbox hints">
        <label></label>
        <span class="pull-right"><label></label></span>
      </div>
    </div>
    <div class="steps-container">
      <ul class="steps hidden" style="margin-left: 0">
        <li data-step="1" class="complete"></li>
        <li data-step="2" class="active"></li>
      </ul>
    </div>

    <form id="answerForm" method="post">
      <input type="hidden" name="junio_smart" value="token">
      <div class="box-body step-content">
        <div class="clearfix step-pane sample-pane active" id="2" data-questionid="4" data-step="2">
          <div class="question-body">
            <label class="lb-title">Pertanyaan 2 Dari 2</label>
            <label class="lb-content">Apa jawaban yang benar dari gambar berikut?</label>
            <label class="lb-mark">80 Nilai Ujian</label>
            <img src="https://media.istockphoto.com/id/591992956/id/foto/panorama-pemandangan-gunung-rinjani-indonesia.jpg?s=612x612&w=0&k=20&c=1DpsfAej_6Z3J689e_QVNbmDJYFvFAfjBqgEM7V04gk=" alt="Contoh Gambar">
          </div>
          <div class="question-answer" id="step2">
            <table class="table">
              <tr>
                <td>
                  <input id="option16" value="16" name="answer[1][4][]" type="radio">
                  <label for="option16">salah</label>
                </td>
                <td>
                  <input id="option17" value="17" name="answer[1][4][]" type="radio">
                  <label for="option17">benar</label>
                </td>
              </tr>
            </table>
          </div>
        </div>

        <div class="question-answer-button">
          <button class="btn" type="button" id="prevbutton"><i class="fa fa-angle-left"></i> Sebelumnya</button>
          <button class="btn" type="button" id="nextbutton" disabled>Berikutnya <i class="fa fa-angle-right"></i></button>
          <input type="submit" class="btn" name="finishedbutton" id="finishedbutton" value="Selesai">
        </div>
      </div>
    </form>
  </div>
</div>

<div class="col-sm-5">
  <!-- Samping kanan (bisa diisi status, timer, dll) -->
</div>

<!-- Pinch Zoom Script -->
<script>
  const zoomContainer = document.getElementById('questionWizard');
  let scale = 1;
  const minScale = 0.5;
  const maxScale = 2;
  let initialDistance = null;
  let initialScale = 1;

  function getDistance(touches) {
    const dx = touches[0].clientX - touches[1].clientX;
    const dy = touches[0].clientY - touches[1].clientY;
    return Math.hypot(dx, dy);
  }

  zoomContainer.addEventListener('touchstart', function (e) {
    if (e.touches.length === 2) {
      initialDistance = getDistance(e.touches);
      initialScale = scale;
    }
  });

  zoomContainer.addEventListener('touchmove', function (e) {
    if (e.touches.length === 2 && initialDistance !== null) {
      e.preventDefault();
      const currentDistance = getDistance(e.touches);
      const scaleChange = currentDistance / initialDistance;
      scale = Math.min(Math.max(minScale, initialScale * scaleChange), maxScale);
      zoomContainer.style.transform = `scale(${scale})`;
    }
  });

  zoomContainer.addEventListener('touchend', function (e) {
    if (e.touches.length < 2) {
      initialDistance = null;
    }
  });
</script>

</body>
</html>
